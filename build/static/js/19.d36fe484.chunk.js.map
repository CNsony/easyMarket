{"version":3,"sources":["components/header/index.js","page/topicCommentWrite/index.js"],"names":["Header","this","props","clickLeft","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","onClick","bind","left","title","right","Component","defaultProps","TopicCommentWrite","state","id","areaMaxLen","content","loading","match","params","setState","history","go","http","postSetComment","typeId","valueId","errno","errmsg","antd_mobile_es_toast__WEBPACK_IMPORTED_MODULE_4__","success","_this2","fail","actions","loginFailure","e","currentTarget","value","_this$state2","react__WEBPACK_IMPORTED_MODULE_11___default","react__WEBPACK_IMPORTED_MODULE_11__","_components_header__WEBPACK_IMPORTED_MODULE_12__","goBack","onChange","getTextValue","maxLength","autoFocus","style","color","length","antd_mobile_es_button__WEBPACK_IMPORTED_MODULE_1__","size","resetArea","type","disabled","submitArea","withRouter","connect","dispatch","bindActionCreators","CommonAction"],"mappings":"uJAEMA,8LAEFC,KAAKC,MAAMC,6CAGX,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OAAOC,QAASP,KAAKE,UAAUM,KAAKR,OAChDA,KAAKC,MAAMQ,MAEdN,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACZN,KAAKC,MAAMS,OAEdP,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACZN,KAAKC,MAAMU,eAdDC,cAqBrBb,EAAOc,aAAe,CACpBX,UAAW,kBAAM,MACjBO,KAAMN,EAAAC,EAAAC,cAAA,KAAGC,UAAU,yBACnBK,MAAO,KACPD,MAAO,gBAEMX,yQCpBTe,6MACJC,MAAQ,CACNC,GAAI,KACJC,WAAY,GACZC,QAAS,GACTC,SAAS,sFAEU,IACGH,EAAQhB,KAAKC,MAA5BmB,MAAOC,OAAQL,GACtBhB,KAAKsB,SAAS,CAACN,wCAGfhB,KAAKC,MAAMsB,QAAQC,IAAI,gLAGFxB,KAAKe,MAAnBC,OAAGE,YACVlB,KAAKsB,SAAS,CACZH,SAAS,aAEmBM,IAAKC,eAAe,CAACR,UAAQS,OAAO,EAAEC,QAAQZ,oBAArEa,UAAOC,WACD,IAAVD,EACDE,EAAA,EAAMC,QAAQF,EAAQ,EAAG,WACvBG,EAAKX,SAAS,CACZH,SAAS,EACTD,QAAS,KAEXe,EAAKhC,MAAMsB,QAAQC,IAAI,KAGzBO,EAAA,EAAMG,KAAKJ,EAAQ,GAAG,WACP,MAAVD,IACDI,EAAKX,SAAS,CACZH,SAAS,IAEXc,EAAKhC,MAAMkC,QAAQC,wJAMzBpC,KAAKsB,SAAS,CACZJ,QAAS,0CAGAmB,GACXrC,KAAKsB,SAAS,CACZJ,QAAUmB,EAAEC,cAAcC,yCAGpB,IAAAC,EACgCxC,KAAKe,MAArCE,EADAuB,EACAvB,WAAYC,EADZsB,EACYtB,QAASC,EADrBqB,EACqBrB,QAC7B,OACEsB,EAAArC,EAAAC,cAACqC,EAAA,SAAD,KACED,EAAArC,EAAAC,cAACsC,EAAA,EAAD,CAAQzC,UAAWF,KAAK4C,OAAOpC,KAAKR,MAAOU,MAAM,6BACjD+B,EAAArC,EAAAC,cAAA,OAAKC,UAAU,mBACbmC,EAAArC,EAAAC,cAAA,YAAUC,UAAU,YAAYuC,SAAU7C,KAAK8C,aAAatC,KAAKR,MAAOuC,MAAOrB,EAAS6B,UAAW9B,EAAY+B,WAAS,IACxHP,EAAArC,EAAAC,cAAA,QAAM4C,MAAO,CAACC,MAAMhC,EAAQiC,SAASlC,EAAW,MAAM,KAAMC,EAAQiC,OAApE,IAA6ElC,IAE/EwB,EAAArC,EAAAC,cAAA,OAAKC,UAAU,WACbmC,EAAArC,EAAAC,cAAA,WACGa,EAAQiC,OAAOV,EAAArC,EAAAC,cAAA+C,EAAA,GAAQC,KAAK,QAAQ9C,QAASP,KAAKsD,UAAU9C,KAAKR,OAAlD,gBAAqE,MAEvFyC,EAAArC,EAAAC,cAAA,WACEoC,EAAArC,EAAAC,cAAA+C,EAAA,GAAQC,KAAK,QAAQE,KAAK,UAAUpC,QAASA,EAASqC,SAAUrC,EAASZ,QAASP,KAAKyD,WAAWjD,KAAKR,OAAvG,0BA/DoBY,aAuEjB8C,sBAAWC,YAAQ,KADP,SAAAC,GAAQ,MAAK,CAACzB,QAAS0B,YAAmBC,EAAcF,KACzDD,CAAkC7C","file":"static/js/19.d36fe484.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport './index.css'\nclass Header extends Component{\n  clickLeft () {\n    this.props.clickLeft()\n  }\n  render () {\n    return (\n      <div className=\"header\">\n        <div className=\"left\" onClick={this.clickLeft.bind(this)}>\n          {this.props.left}\n        </div>\n        <div className=\"title\">\n          {this.props.title}\n        </div>\n        <div className=\"right\">\n          {this.props.right}\n        </div>\n      </div>\n    )\n  }\n}\n\nHeader.defaultProps = {\n  clickLeft: () => null,\n  left: <i className=\"iconfont icon-i-left\"></i>,\n  right: null,\n  title: '标题'\n}\nexport default Header","import React, {Component, Fragment} from 'react'\nimport Header from '../../components/header'\nimport {withRouter} from 'react-router-dom'\nimport {Button, Toast} from 'antd-mobile'\nimport './index.scss'\nimport http from '../../http'\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as CommonAction from '../../redux/actions/common';\nclass TopicCommentWrite extends Component{\n  state = {\n    id: null,\n    areaMaxLen: 80,\n    content: '',\n    loading: false\n  }\n  componentDidMount () {\n    const {match:{params:{id}}} = this.props\n    this.setState({id})\n  }\n  goBack () {\n    this.props.history.go(-1)\n  }\n  async submitArea () {\n    const {id,content} = this.state\n    this.setState({\n      loading: true\n    })\n    const {errno, errmsg} = await http.postSetComment({content,typeId:1,valueId:id})\n    if(errno === 0){\n      Toast.success(errmsg, 1, () =>{\n        this.setState({\n          loading: false,\n          content: ''\n        })\n        this.props.history.go(-1)\n      })\n    }else{\n      Toast.fail(errmsg, .5,() => {\n        if(errno === 401){\n          this.setState({\n            loading: false\n          })\n          this.props.actions.loginFailure()\n        }\n      })\n    }\n  }\n  resetArea () {\n    this.setState({\n      content: ''\n    })\n  }\n  getTextValue(e){\n    this.setState({\n      content:  e.currentTarget.value\n    })\n  }\n  render () {\n    const { areaMaxLen, content, loading} = this.state\n    return (\n      <Fragment>\n        <Header clickLeft={this.goBack.bind(this)} title=\"填写留言\"></Header>\n        <div className=\"textAreaContent\">\n          <textarea className=\"inputArea\" onChange={this.getTextValue.bind(this)} value={content} maxLength={areaMaxLen} autoFocus/>\n          <span style={{color:content.length===areaMaxLen?'red':''}}>{content.length}/{areaMaxLen}</span>\n        </div>\n        <div className=\"buttons\">\n          <div>\n            {content.length?<Button size=\"small\" onClick={this.resetArea.bind(this)}>清空</Button>:null}\n          </div>\n          <div>\n            <Button size=\"small\" type=\"primary\" loading={loading} disabled={loading} onClick={this.submitArea.bind(this)}>留言</Button>\n          </div>\n        </div>\n      </Fragment>\n    )\n  }\n}\nconst mapDispatchToProps = dispatch => ({actions: bindActionCreators(CommonAction, dispatch)})\nexport default withRouter(connect(null, mapDispatchToProps)(TopicCommentWrite))\n"],"sourceRoot":""}