{"version":3,"sources":["components/imgLazyLoad/index.js","components/header/index.js","components/common/goodsList/index.js","redux/actions/goods.js","redux/actions/categorys.js","page/categorys/index.js"],"names":["ImgLazyLoad","props","_this","Object","E_CodeArea_easyMarket_front_end_easyMarketApp_master_easyMarketApp_master_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","E_CodeArea_easyMarket_front_end_easyMarketApp_master_easyMarketApp_master_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","E_CodeArea_easyMarket_front_end_easyMarketApp_master_easyMarketApp_master_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","isLoad","isLoading","handler","bind","E_CodeArea_easyMarket_front_end_easyMarketApp_master_easyMarketApp_master_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","window","addEventListener","_this2","removeEventListener","_this$props","offSetTop","realUrl","visibleBottom","scrollY","document","documentElement","clientHeight","refs","imgLazyLoad","offsetTop","imgObj","Image","src","setState","Promise","resolve","reject","onload","then","_this$props2","initUrl","imgSrc","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","ref","className","alt","Component","defaultProps","Header","clickLeft","react__WEBPACK_IMPORTED_MODULE_5___default","onClick","left","title","right","GoodsList","goodsList","map","item","react_router_dom__WEBPACK_IMPORTED_MODULE_6__","to","concat","id","key","_imgLazyLoad__WEBPACK_IMPORTED_MODULE_8__","list_pic_url","name","retail_price","__webpack_require__","r","__webpack_exports__","d","fetchCount","fetchGoodsData","_actionTypes__WEBPACK_IMPORTED_MODULE_0__","parmas","type","ActionsTypes","GOODS_COUNT_GETDATA_REQUSET","GOODS_LIST_GETDATA_REQUSET","fetchNavData","CATAGORY_NAV_GETDATA_REQUEST","Categors","page","currentCategoryId","history","go","actions","match","params","goodsAction","size","categoryId","index","_ref","scrollTo","nextProps","brotherCategory","forEach","Number","_this$props3","currentCategory","_this$state","react_default","react","header","goBack","tabs","onTabClick","clickTab","renderTab","front_name","common_goodsList","withRouter","connect","objectSpread","catrgorys","goods","dispatch","bindActionCreators","categorysAction"],"mappings":"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","file":"static/js/10.fdad7def.chunk.js","sourcesContent":["import React, {Component} from 'react'\nimport './index.scss'\n//添加事件监听\nclass ImgLazyLoad extends Component{\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoad: false,\n      isLoading: false,\n    }\n    this.handler = this.handler.bind(this);\n  }\n  componentDidMount () {\n    this.handler()\n    window.addEventListener('scroll', this.handler)\n  }\n  handler () {\n    if(!this.state.isLoading){\n      const {offSetTop, realUrl} = this.props\n      const visibleBottom = window.scrollY + document.documentElement.clientHeight -offSetTop;\n      const imgTop = this.refs.imgLazyLoad.offsetTop\n      if(imgTop < visibleBottom){\n        let imgObj = new Image()\n        imgObj.src = realUrl\n        this.setState({isLoading: true})\n        new Promise((resolve, reject)=>{\n          imgObj.onload = function(){\n            resolve(imgObj)\n          }\n        }).then((imgObj)=>{\n          this.setState({isLoad: true})\n        })\n      }\n    }else{\n      window.removeEventListener('scroll', this.handler)\n    }\n  }\n  componentWillUnmount () {\n    window.removeEventListener('scroll', this.handler)\n  }\n  render () {\n    const { isLoad } = this.state\n    const {realUrl, initUrl} = this.props\n    const imgSrc = isLoad?realUrl: initUrl\n    return (\n      <img ref=\"imgLazyLoad\" className={isLoad?'imgLazyload loadEnd': 'imgLazyload loading'} src={imgSrc} alt=\"imgLazyLoad\"/>\n    )\n  }\n}\nImgLazyLoad.defaultProps = {\n  offSetTop: 40,\n  initUrl: 'https://ss0.bdstatic.com/-0U0bnSm1A5BphGlnYG/tam-ogel/8bc5c8ca3da4043fc6c9dbfb32d5dc89_121_121.jpg'\n}\nexport default ImgLazyLoad\n","import React, { Component } from 'react'\nimport './index.css'\nclass Header extends Component{\n  clickLeft () {\n    this.props.clickLeft()\n  }\n  render () {\n    return (\n      <div className=\"header\">\n        <div className=\"left\" onClick={this.clickLeft.bind(this)}>\n          {this.props.left}\n        </div>\n        <div className=\"title\">\n          {this.props.title}\n        </div>\n        <div className=\"right\">\n          {this.props.right}\n        </div>\n      </div>\n    )\n  }\n}\n\nHeader.defaultProps = {\n  clickLeft: () => null,\n  left: <i className=\"iconfont icon-i-left\"></i>,\n  right: null,\n  title: '标题'\n}\nexport default Header","import React, {Component} from 'react'\nimport {Link} from 'react-router-dom'\nimport './index.scss'\nimport ImgLazyLoad from '../../imgLazyLoad'\nclass GoodsList extends Component{\n  render () {\n    const { goodsList} = this.props\n    return (\n        <div className=\"goodsList\">\n          {goodsList.map((item) => {\n            return(\n              <Link to={`/goods/${item.id}`} key={item.id} className=\"goodsItem\">\n                <div className=\"goodsItemImg\">\n                  <ImgLazyLoad\n                    offSetTop={44}\n                    realUrl = {item.list_pic_url}>\n                  </ImgLazyLoad>\n                </div>\n                <div className=\"goodsItemName\">{item.name}</div>\n                <div className=\"goodsItemPrice\">￥{item.retail_price}元</div>\n              </Link>\n            )\n          })}\n        </div>\n    )\n  }\n}\nexport default GoodsList\n","import ActionsTypes from './actionTypes';\n\nexport function fetchCount(parmas) {\n  return {\n    type: ActionsTypes.GOODS_COUNT_GETDATA_REQUSET,\n    parmas\n  }\n}\nexport function fetchGoodsData(parmas) {\n  return {\n    type: ActionsTypes.GOODS_LIST_GETDATA_REQUSET,\n    parmas\n  }\n}","import ActionsTypes from './actionTypes';\n\nexport function fetchNavData(parmas) {\n  return {\n    type: ActionsTypes.CATAGORY_NAV_GETDATA_REQUEST,\n    parmas\n  }\n}","import React, {Component, Fragment} from 'react'\nimport GoodsList from '../../components/common/goodsList'\nimport {withRouter} from 'react-router-dom'\nimport { Tabs } from 'antd-mobile';\nimport './index.scss'\nimport Header from '../../components/header'\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as categorysAction from '../../redux/actions/categorys';\nimport * as goodsAction from '../../redux/actions/goods';\nclass Categors extends Component{\n  state = {\n    page: 0,\n    currentCategoryId: 0\n  }\n  goBack (currentCategoryId) {\n    this.props.history.go(-1)\n  }\n  componentWillMount() {\n    const { actions:{fetchNavData},match:{params:{id}},goodsAction:{fetchGoodsData} } = this.props\n    this.setState({\n      currentCategoryId: id\n    })\n    fetchGoodsData({page:1, size:1000,categoryId:id})\n    fetchNavData({id:id})\n  }\n  /*切换分类*/\n  clickTab({id},index){\n    if(this.state.currentCategoryId!==id){\n      this.setState({\n        page: index,\n        currentCategoryId: id\n      })\n      const { actions:{fetchNavData},goodsAction:{fetchGoodsData}} = this.props\n      fetchGoodsData({page:1, size:1000,categoryId:id})\n      fetchNavData({id})\n      window.scrollTo(0,0)\n    }\n  }\n  componentWillReceiveProps (nextProps){\n    const {brotherCategory} = this.props\n    brotherCategory.forEach((item,index) => {\n      if(item.id === Number(this.state.currentCategoryId)){\n        this.setState({\n          page: index\n        })\n      }\n    })\n  }\n  render () {\n    const {brotherCategory, currentCategory, goodsList} = this.props\n    const {page, currentCategoryId} = this.state\n    return (\n      <Fragment>\n        <Header clickLeft={this.goBack.bind(this, currentCategoryId)} title=\"奇趣分类\"></Header>\n        <div className=\"tabWrap\">\n          <Tabs tabs={brotherCategory}  page={page} onTabClick={this.clickTab.bind(this)} renderTab={props => <div className=\"tabsItem\">{props.name}</div>}/>\n        </div>\n        <div className=\"categoryDetail\">\n          <div>{currentCategory.name}</div>\n          <div>{currentCategory.front_name}</div>\n        </div>\n        <div className=\"goodsList\">\n          <GoodsList goodsList={goodsList}></GoodsList>\n        </div>\n      </Fragment>\n    )\n  }\n}\nconst mapStateToProps = (state, props) => ({\n    ...state.catrgorys,\n    goodsList: state.goods.goodsList\n  })\n\nconst mapDispatchToProps = dispatch => ({\n    actions: bindActionCreators(categorysAction, dispatch),\n    goodsAction: bindActionCreators(goodsAction, dispatch)\n  })\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Categors))\n"],"sourceRoot":""}