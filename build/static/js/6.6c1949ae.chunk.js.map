{"version":3,"sources":["components/imgLazyLoad/index.js","components/header/index.js","components/common/goodsList/index.js","components/common/commentList/index.js","page/goods/index.js"],"names":["ImgLazyLoad","props","_this","Object","E_CodeArea_easyMarket_front_end_easyMarketApp_master_easyMarketApp_master_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","E_CodeArea_easyMarket_front_end_easyMarketApp_master_easyMarketApp_master_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","E_CodeArea_easyMarket_front_end_easyMarketApp_master_easyMarketApp_master_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","isLoad","isLoading","handler","bind","E_CodeArea_easyMarket_front_end_easyMarketApp_master_easyMarketApp_master_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","window","addEventListener","_this2","removeEventListener","_this$props","offSetTop","realUrl","visibleBottom","scrollY","document","documentElement","clientHeight","refs","imgLazyLoad","offsetTop","imgObj","Image","src","setState","Promise","resolve","reject","onload","then","_this$props2","initUrl","imgSrc","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","ref","className","alt","Component","defaultProps","Header","clickLeft","react__WEBPACK_IMPORTED_MODULE_5___default","onClick","left","title","right","GoodsList","goodsList","map","item","react_router_dom__WEBPACK_IMPORTED_MODULE_6__","to","concat","id","key","_imgLazyLoad__WEBPACK_IMPORTED_MODULE_8__","list_pic_url","name","retail_price","CommentList","commentList","react__WEBPACK_IMPORTED_MODULE_5__","index","content","user_info","username","add_time","pic_list","pic_url","Goods","info","goodsName","subTitle","goods_desc","brand","gallery","comment","attribute","issue","specificationList","productList","goodsCount","userHasCollect","goodsBuyNum","isShowSize","fetchData","match","params","fetchCartNum","actions","startLoading","http","getGoodsDetail","data","getGoodsRelated","forEach","activeId","valueList","goods_brief","endLoading","getCartNum","errno","errmsg","cartTotal","antd_mobile_es_toast__WEBPACK_IMPORTED_MODULE_6__","fail","loginFailure","postDoLikes","typeId","valueId","type","val","stock","go","history","newP","_this$state","computedGoodsSizePriceAndSizeName","priceId","postAddCart","goodsId","number","productId","success","_this3","loading","sizeList","priceList","hasChooseSize","sizePriceIndex","price","temp","push","value","goods_specification_ids","join","goods_number","hasChooseSizeName","_this4","_this$state2","_this$state2$info","_this$computedGoodsSi2","isloading","react__WEBPACK_IMPORTED_MODULE_14___default","antd_mobile_es_modal__WEBPACK_IMPORTED_MODULE_4__","popup","visible","onClose","changeIsShowSize","animationType","length","img_url","specification_id","changeSizeActiveId","changeBuyNum","addCart","payGoods","_components_header__WEBPACK_IMPORTED_MODULE_17__","goBack","antd_mobile_es_carousel__WEBPACK_IMPORTED_MODULE_2__","autoplay","infinite","_components_imgLazyLoad__WEBPACK_IMPORTED_MODULE_20__","count","react_router_dom__WEBPACK_IMPORTED_MODULE_15__","_components_common_commentList__WEBPACK_IMPORTED_MODULE_24__","dangerouslySetInnerHTML","__html","question","answer","_components_common_goodsList__WEBPACK_IMPORTED_MODULE_25__","changeLikes","withRouter","connect","E_CodeArea_easyMarket_front_end_easyMarketApp_master_easyMarketApp_master_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","common","dispatch","bindActionCreators","commonAction"],"mappings":"8JAGMA,sBACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KACDQ,MAAQ,CACXC,QAAQ,EACRC,WAAW,GAEbT,EAAKU,QAAUV,EAAKU,QAAQC,KAAbV,OAAAW,EAAA,EAAAX,QAAAW,EAAA,EAAAX,CAAAD,KANEA,mFASjBG,KAAKO,UACLG,OAAOC,iBAAiB,SAAUX,KAAKO,2CAE9B,IAAAK,EAAAZ,KACT,GAAIA,KAAKI,MAAME,UAiBbI,OAAOG,oBAAoB,SAAUb,KAAKO,aAjBnB,KAAAO,EACMd,KAAKJ,MAA3BmB,EADgBD,EAChBC,UAAWC,EADKF,EACLE,QACZC,EAAgBP,OAAOQ,QAAUC,SAASC,gBAAgBC,aAAcN,EAE9E,GADef,KAAKsB,KAAKC,YAAYC,UACzBP,EAAc,CACxB,IAAIQ,EAAS,IAAIC,MACjBD,EAAOE,IAAMX,EACbhB,KAAK4B,SAAS,CAACtB,WAAW,IAC1B,IAAIuB,QAAQ,SAACC,EAASC,GACpBN,EAAOO,OAAS,WACdF,EAAQL,MAETQ,KAAK,SAACR,GACPb,EAAKgB,SAAS,CAACvB,QAAQ,uDAQ7BK,OAAOG,oBAAoB,SAAUb,KAAKO,0CAElC,IACAF,EAAWL,KAAKI,MAAhBC,OADA6B,EAEmBlC,KAAKJ,MAAzBoB,EAFCkB,EAEDlB,QAASmB,EAFRD,EAEQC,QACVC,EAAS/B,EAAOW,EAASmB,EAC/B,OACEE,EAAAC,EAAAC,cAAA,OAAKC,IAAI,cAAcC,UAAWpC,EAAO,sBAAuB,sBAAuBsB,IAAKS,EAAQM,IAAI,uBA1CpFC,cA8C1BhD,EAAYiD,aAAe,CACzB7B,UAAW,GACXoB,QAAS,sGAEIxC,oGCnDTkD,8LAEF7C,KAAKJ,MAAMkD,6CAGX,OACEC,EAAAT,EAAAC,cAAA,OAAKE,UAAU,UACbM,EAAAT,EAAAC,cAAA,OAAKE,UAAU,OAAOO,QAAShD,KAAK8C,UAAUtC,KAAKR,OAChDA,KAAKJ,MAAMqD,MAEdF,EAAAT,EAAAC,cAAA,OAAKE,UAAU,SACZzC,KAAKJ,MAAMsD,OAEdH,EAAAT,EAAAC,cAAA,OAAKE,UAAU,SACZzC,KAAKJ,MAAMuD,eAdDR,cAqBrBE,EAAOD,aAAe,CACpBE,UAAW,kBAAM,MACjBG,KAAMF,EAAAT,EAAAC,cAAA,KAAGE,UAAU,yBACnBU,MAAO,KACPD,MAAO,gBAEML,2KCzBTO,mLACM,IACAC,EAAarD,KAAKJ,MAAlByD,UACR,OACIN,EAAAT,EAAAC,cAAA,OAAKE,UAAU,aACZY,EAAUC,IAAI,SAACC,GACd,OACER,EAAAT,EAAAC,cAACiB,EAAA,EAAD,CAAMC,GAAE,UAAAC,OAAYH,EAAKI,IAAMC,IAAKL,EAAKI,GAAIlB,UAAU,aACrDM,EAAAT,EAAAC,cAAA,OAAKE,UAAU,gBACbM,EAAAT,EAAAC,cAACsB,EAAA,EAAD,CACE9C,UAAW,GACXC,QAAWuC,EAAKO,gBAGpBf,EAAAT,EAAAC,cAAA,OAAKE,UAAU,iBAAiBc,EAAKQ,MACrChB,EAAAT,EAAAC,cAAA,OAAKE,UAAU,kBAAf,SAAkCc,EAAKS,aAAvC,qBAfQrB,aAuBTS,0HCzBTa,2LACM,IACAC,EAAelE,KAAKJ,MAApBsE,YACR,OACEnB,EAAAT,EAAAC,cAAC4B,EAAA,SAAD,KACEpB,EAAAT,EAAAC,cAAA,OAAKE,UAAU,eACZyB,EAAYZ,IAAI,SAACC,EAAMa,GACtB,OACErB,EAAAT,EAAAC,cAAA,OAAKE,UAAU,cAAcmB,IAAKL,EAAKc,QAAUD,GAC/CrB,EAAAT,EAAAC,cAAA,OAAKE,UAAU,YACbM,EAAAT,EAAAC,cAAA,WAAM,cAAegB,GAAQ,aAAcA,EAAKe,UAAUf,EAAKe,UAAUC,SAAS,4BAClFxB,EAAAT,EAAAC,cAAA,WAAMgB,EAAKiB,WAEbzB,EAAAT,EAAAC,cAAA,OAAKE,UAAU,eAAec,EAAKc,SACnCtB,EAAAT,EAAAC,cAAA,OAAKE,UAAU,kBAEPc,EAAKkB,SAASnB,IAAI,SAACC,GACf,OAAOR,EAAAT,EAAAC,cAAA,OAAKZ,IAAK4B,EAAKmB,QAASd,IAAKL,EAAKI,GAAIjB,IAAKa,EAAKI,oBAjBzDhB,cA6BXsB,yUClBTU,6MACJvE,MAAQ,CACNwE,KAAM,CACJC,UAAW,GACXC,SAAU,GACVC,WAAY,MAEdC,MAAO,GACPC,QAAS,GACTC,QAAS,GACTC,UAAW,GACXC,MAAO,GACP/B,UAAW,GACXgC,kBAAmB,GACnBC,YAAa,GACbC,WAAY,EACZC,eAAgB,EAChBC,YAAa,EACbC,YAAY,sFAGZ1F,KAAK2F,UAAU3F,KAAKJ,MAAMgG,MAAMC,OAAOlC,IACvC3D,KAAK8F,yFAGUnC,wGACRoC,EAAW/F,KAAKJ,MAAhBmG,iBAELA,EAAQC,wBACWC,IAAKC,eAAe,CAACvC,qBAAlCwC,kBACoBF,IAAKG,gBAAgB,CAACzC,uBAAzCN,cACFuB,EAAkGuB,EAAlGvB,KAAMK,EAA4FkB,EAA5FlB,QAASD,EAAmFmB,EAAnFnB,MAAOE,EAA4EiB,EAA5EjB,QAASC,EAAmEgB,EAAnEhB,UAAUC,EAAyDe,EAAzDf,MAAOC,EAAkDc,EAAlDd,kBAAmBC,EAA+Ba,EAA/Bb,YAAaE,EAAkBW,EAAlBX,eACrFH,EAAkBgB,QAAQ,SAAC9C,GACzBA,EAAK+C,SAAW/C,EAAKgD,UAAU,GAAG5C,KAEpC3D,KAAK4B,SAAS,CACZgD,KAAK,CACHC,UAAWD,EAAKb,KAChBe,SAAUF,EAAK4B,YACfzB,WAAYH,EAAKG,YAEnBS,iBACAN,UACAF,QACAC,UACAE,YACAC,QACA/B,YACAgC,oBACAC,gBAEFS,EAAQU,qEAERV,EAAQU,0TAOiCR,IAAKS,WAAW,oBAAlDC,UAAOC,WAAQC,cACX,MAARF,EACCG,EAAA,EAAMC,KAAKH,EAAQ,GAAG,WACpBhG,EAAKhB,MAAMmG,QAAQiB,iBAGvBhH,KAAK4B,SAAS,CAAC2D,WAAWsB,EAAUtB,4VAQZU,IAAKgB,YAAY,CAACC,OAAQ,EAAGC,QAASnH,KAAKJ,MAAMgG,MAAMC,OAAOlC,qBAA7EyD,IAANjB,KAAMiB,KACbpH,KAAK4B,SAAS,CAAC4D,eAAuB,QAAP4B,EAAa,EAAE,2IAGlCC,EAAKC,GACdtH,KAAKI,MAAMqF,YAAc4B,GAAO,GAAKrH,KAAKI,MAAMqF,YAAc4B,GAAOC,GACtEtH,KAAK4B,SAAS,CACZ6D,YAAazF,KAAKI,MAAMqF,YAAc4B,sCAM1CE,EADuBvH,KAAKJ,MAArB4H,QAASD,KACZ,8CAIJvH,KAAK4B,SAAS,CACZ8D,YAAa1F,KAAKI,MAAMsF,+DAGF+B,GACrBzH,KAAKJ,MAAMgG,MAAMC,OAAOlC,KAAK8D,EAAK7B,MAAMC,OAAOlC,IAC9C3D,KAAK2F,UAAU8B,EAAK7B,MAAMC,OAAOlC,+CAInBS,EAAOb,GAAM,IAAAmE,EACuB1H,KAAKI,MAApDiF,EADwBqC,EACxBrC,kBAAmBC,EADKoC,EACLpC,YAAaG,EADRiC,EACQjC,YACvC,GAAGJ,EAAkBjB,GAAOkC,WAAW/C,EAAKI,GAAG,CAC7C0B,EAAkBjB,GAAOkC,SAAW/C,EAAKI,GADI,IAEtC2D,EAAStH,KAAK2H,kCAAkCtC,EAAmBC,GAAnEgC,MACPtH,KAAK4B,SAAS,CACZyD,oBACAI,YAAaA,EAAY6B,EAAMA,EAAM7B,6EAK5BmC,EAASnC,EAAaC,uFAC/BA,yBACF1F,KAAK4B,SAAS,CAAC8D,YAAY,sBACpB,kBAEND,EAAY,0BACbqB,EAAA,EAAMC,KAAK,6CAAU,qBACd,6BAEqBd,IAAK4B,YAAY,CAACC,QAAS9H,KAAKJ,MAAMgG,MAAMC,OAAOlC,GAAIoE,OAAQtC,EAAauC,UAAUJ,oBAA7GjB,UAAOC,WACD,IAAVD,EACCG,EAAA,EAAMmB,QAAQ,iCAAQ,GAAI,WACtBC,EAAKpC,iBAGXgB,EAAA,EAAMC,KAAKH,EAAQ,GAAG,WACP,MAAVD,GACDuB,EAAKtI,MAAMmG,QAAQiB,4JAOzBF,EAAA,EAAMqB,QAAQ,oEAAmB,6DAQDC,EAAUC,GAC1C,IAAIC,EAAgB,GAChBC,EAAiB,GACjBC,EAAQ,EACRlB,EAAQ,EACRM,EAAU,KAgBd,OAfAQ,EAAS/B,QAAQ,SAAC9C,GAChBA,EAAKgD,UAAUF,QAAQ,SAACoC,GACnBlF,EAAK+C,WAAamC,EAAK9E,KACxB4E,EAAeG,KAAKD,EAAK9E,IACzB2E,EAAcI,KAAKD,EAAKE,YAI9BN,EAAUhC,QAAQ,SAAC9C,GACdA,EAAKqF,0BAA4BL,EAAeM,KAAK,OACtDL,EAAQjF,EAAKS,aACbsD,EAAQ/D,EAAKuF,aACblB,EAAUrE,EAAKI,MAGZ,CACLoF,kBAAmBT,EAAcO,KAAK,UACtCL,QACAlB,QACAM,4CAGM,IAAAoB,EAAAhJ,KAAAiJ,EAG8CjJ,KAAKI,MAHnD8I,EAAAD,EACDrE,KAAMC,EADLqE,EACKrE,UAAWC,EADhBoE,EACgBpE,SAAUC,EAD1BmE,EAC0BnE,WAChCC,EAFMiE,EAENjE,MAAOC,EAFDgE,EAEChE,QAASS,EAFVuD,EAEUvD,WAAYR,EAFtB+D,EAEsB/D,QAASC,EAF/B8D,EAE+B9D,UAAWI,EAF1C0D,EAE0C1D,WAAYC,EAFtDyD,EAEsDzD,eAAgBC,EAFtEwD,EAEsExD,YAC5EL,EAHM6D,EAGN7D,MAAO/B,EAHD4F,EAGC5F,UAAWgC,EAHZ4D,EAGY5D,kBAAmBC,EAH/B2D,EAG+B3D,YAH/B6D,EAI4CnJ,KAAK2H,kCAAkCtC,EAAmBC,GAAvGyD,EAJCI,EAIDJ,kBAAmBP,EAJlBW,EAIkBX,MAAOlB,EAJzB6B,EAIyB7B,MAAMM,EAJ/BuB,EAI+BvB,QAJ/B9G,EAK4Bd,KAAKJ,MAAzB8I,EALR5H,EAKD0G,QAASkB,KAChB,OANQ5H,EAKesI,UAsKb,KAnKFC,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,aACb4G,EAAA/G,EAAAC,cAAA+G,EAAA,GACIC,OAAK,EACLC,QAAS9D,EACT+D,QAASzJ,KAAK0J,iBAAiBlJ,KAAKR,MACpC2J,cAAc,YAEhBN,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,eACb4G,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,mBACZwC,EAAQ2E,OAAQP,EAAA/G,EAAAC,cAAA,OAAKZ,IAAKsD,EAAQ,GAAG4E,QAASnH,IAAI,UAAU,KAC7D2G,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,0BACb4G,EAAA/G,EAAAC,cAAA,4BAAS8G,EAAA/G,EAAAC,cAAA,qBAAQiG,IACjBa,EAAA/G,EAAAC,cAAA,4BAAS8G,EAAA/G,EAAAC,cAAA,YAAO+E,EAAP,WACT+B,EAAA/G,EAAAC,cAAA,iCACE8G,EAAA/G,EAAAC,cAAA,WAAMwG,IAEVM,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,aAAaO,QAAShD,KAAK0J,iBAAiBlJ,KAAKR,OAC9DqJ,EAAA/G,EAAAC,cAAA,KAAGE,UAAU,oCAGjB4G,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,iBAEX4C,EAAkB/B,IAAI,SAACC,EAAMa,GAAP,OACpBiF,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,gBAAgBmB,IAAKL,EAAKuG,kBACvCT,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,qBAAqBc,EAAKQ,MACzCsF,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,qBAEXc,EAAKgD,UAAUjD,IAAI,SAAAmF,GAAI,OACnBY,EAAA/G,EAAAC,cAAA,OAAKE,UAAWc,EAAK+C,WAAamC,EAAK9E,GAAG,2BAA2B,oBAChEX,QAASgG,EAAKe,mBAAmBvJ,KAAKwI,EAAM5E,EAAOqE,EAAMnB,GAAQ1D,IAAK6E,EAAK9E,IAAK8E,EAAKE,aAQxGU,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,iBACb4G,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,qBAAf,gBAEE6E,EAAM,EACF+B,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,qBACb4G,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,iBACb4G,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,eAAeO,QAAShD,KAAKgK,aAAaxJ,KAAKR,MAAO,EAAGsH,IAAxE,KACA+B,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,gBAAgBgD,GAC/B4D,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,eAAeO,QAAShD,KAAKgK,aAAaxJ,KAAKR,KAAK,EAAGsH,IAAtE,OAIJ+B,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,qBAAf,0BAMZ4G,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,eACb4G,EAAA/G,EAAAC,cAAA,OAAKS,QAAShD,KAAKiK,QAAQzJ,KAAKR,KAAK4H,EAAQnC,EAAaC,IAA1D,kCACA2D,EAAA/G,EAAAC,cAAA,OAAMS,QAAShD,KAAKkK,SAAS1J,KAAKR,OAAlC,8BAGJqJ,EAAA/G,EAAAC,cAAC4H,EAAA,EAAD,CAAQrH,UAAW9C,KAAKoK,OAAO5J,KAAKR,MAAOkD,MAAO2B,IAClDwE,EAAA/G,EAAAC,cAAA8H,EAAA,GAAUC,UAAQ,EAACC,UAAQ,GACxBtF,EAAQ3B,IAAI,SAAAC,GAAI,OACb8F,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,kBAAkBmB,IAAKL,EAAKI,IACzC0F,EAAA/G,EAAAC,cAACiI,EAAA,EAAD,CACIzJ,UAAW,EACXC,QAAWuC,EAAKsG,cAK5BR,EAAA/G,EAAAC,cAAA,MAAIE,UAAU,eACZ4G,EAAA/G,EAAAC,cAAA,UAAI8G,EAAA/G,EAAAC,cAAA,sBAAJ,oCACA8G,EAAA/G,EAAAC,cAAA,UAAI8G,EAAA/G,EAAAC,cAAA,sBAAJ,0CACA8G,EAAA/G,EAAAC,cAAA,UAAI8G,EAAA/G,EAAAC,cAAA,sBAAJ,qCAEF8G,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,gBACb4G,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,kBAAkBoC,GACjCwE,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,qBAAqBqC,GACpCuE,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,mBAAf,SAAmC+F,GAEjC,SAAUxD,EACNqE,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,kBAAkBO,QAAS,WAAO0F,EAAI,gBAAAhF,OAAiBsB,EAAMrB,OAC1E0F,EAAA/G,EAAAC,cAAA,WAAMyC,EAAMjB,OAEf,MAGPsF,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,YAAYO,QAAShD,KAAK0J,iBAAiBlJ,KAAKR,OAC7DqJ,EAAA/G,EAAAC,cAAA,WAAMwG,GACNM,EAAA/G,EAAAC,cAAA,gBAAQkD,GACR4D,EAAA/G,EAAAC,cAAA,sCACM8G,EAAA/G,EAAAC,cAAA,KAAGE,UAAU,0BAGpByC,EAAQuF,MAAMpB,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,gBACxB4G,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,qBACb4G,EAAA/G,EAAAC,cAAA,4BAAU2C,EAAQuF,MAAlB,KACApB,EAAA/G,EAAAC,cAAA,WACE8G,EAAA/G,EAAAC,cAACmI,EAAA,EAAD,CAAMjH,GAAE,YAAAC,OAAc1D,KAAKJ,MAAMgG,MAAMC,OAAOlC,GAAtC,cAAR,2BACM0F,EAAA/G,EAAAC,cAAA,KAAGE,UAAU,2BAKrB,SAAUyC,EAASmE,EAAA/G,EAAAC,cAACoI,EAAA,EAAD,CAAazG,YAAc,CAACgB,EAAQiB,QAAsB,MAEzE,KACZkD,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,kBACb4G,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,sBAAf,4BAGA4G,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,sBAEX0C,EAAU7B,IAAI,SAACC,GAAD,OACV8F,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,qBAAqBmB,IAAKL,EAAKQ,MAC5CsF,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,kBAAkBc,EAAKQ,MACtCsF,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,oBAAoBc,EAAKoF,YAMpDU,EAAA/G,EAAAC,cAAA,OAAMqI,wBAAyB,CAACC,OAAO9F,GAAatC,UAAU,mBAC9D4G,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,kBACb4G,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,sBAAf,4BAIE2C,EAAM9B,IAAI,SAACC,GAAD,OACN8F,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,cAAcmB,IAAKL,EAAKI,IACrC0F,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,gBACb4G,EAAA/G,EAAAC,cAAA,sBAAegB,EAAKuH,UAEtBzB,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,kBACZc,EAAKwH,YAOlB1B,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,kBACb4G,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,sBAAf,mCAIF4G,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,aACb4G,EAAA/G,EAAAC,cAACyI,EAAA,EAAD,CAAW3H,UAAWA,KAExBgG,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,eACb4G,EAAA/G,EAAAC,cAAA,OAAKE,UAA4B,IAAjB+C,EAAmB,cAAe,SAAUxC,QAAShD,KAAKiL,YAAYzK,KAAKR,OACvE,IAAjBwF,EAAmB,SAAK,UAE3B6D,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,UAAUO,QAAS,WAAO0F,EAAI,WAC3CW,EAAA/G,EAAAC,cAAA,KAAGE,UAAU,0BACX4G,EAAA/G,EAAAC,cAAA,YAAOgD,KAGX8D,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,UAAUO,QAAShD,KAAKiK,QAAQzJ,KAAKR,KAAK4H,EAASnC,EAAaC,IAA/E,kCACA2D,EAAA/G,EAAAC,cAAA,OAAKE,UAAU,WAAWO,QAAShD,KAAKkK,SAAS1J,KAAKR,OAAtD,qCArVI2C,aA8VLuI,sBAAWC,YAFF,SAAC/K,EAAOR,GAAR,OAAAE,OAAAsL,EAAA,EAAAtL,CAAA,GAAuBM,EAAMiL,SAC1B,SAAAC,GAAQ,MAAK,CAACvF,QAASwF,YAAmBC,EAAcF,KACzDH,CAA6CxG","file":"static/js/6.6c1949ae.chunk.js","sourcesContent":["import React, {Component} from 'react'\nimport './index.scss'\n//添加事件监听\nclass ImgLazyLoad extends Component{\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoad: false,\n      isLoading: false,\n    }\n    this.handler = this.handler.bind(this);\n  }\n  componentDidMount () {\n    this.handler()\n    window.addEventListener('scroll', this.handler)\n  }\n  handler () {\n    if(!this.state.isLoading){\n      const {offSetTop, realUrl} = this.props\n      const visibleBottom = window.scrollY + document.documentElement.clientHeight -offSetTop;\n      const imgTop = this.refs.imgLazyLoad.offsetTop\n      if(imgTop < visibleBottom){\n        let imgObj = new Image()\n        imgObj.src = realUrl\n        this.setState({isLoading: true})\n        new Promise((resolve, reject)=>{\n          imgObj.onload = function(){\n            resolve(imgObj)\n          }\n        }).then((imgObj)=>{\n          this.setState({isLoad: true})\n        })\n      }\n    }else{\n      window.removeEventListener('scroll', this.handler)\n    }\n  }\n  componentWillUnmount () {\n    window.removeEventListener('scroll', this.handler)\n  }\n  render () {\n    const { isLoad } = this.state\n    const {realUrl, initUrl} = this.props\n    const imgSrc = isLoad?realUrl: initUrl\n    return (\n      <img ref=\"imgLazyLoad\" className={isLoad?'imgLazyload loadEnd': 'imgLazyload loading'} src={imgSrc} alt=\"imgLazyLoad\"/>\n    )\n  }\n}\nImgLazyLoad.defaultProps = {\n  offSetTop: 40,\n  initUrl: 'https://ss0.bdstatic.com/-0U0bnSm1A5BphGlnYG/tam-ogel/8bc5c8ca3da4043fc6c9dbfb32d5dc89_121_121.jpg'\n}\nexport default ImgLazyLoad\n","import React, { Component } from 'react'\nimport './index.css'\nclass Header extends Component{\n  clickLeft () {\n    this.props.clickLeft()\n  }\n  render () {\n    return (\n      <div className=\"header\">\n        <div className=\"left\" onClick={this.clickLeft.bind(this)}>\n          {this.props.left}\n        </div>\n        <div className=\"title\">\n          {this.props.title}\n        </div>\n        <div className=\"right\">\n          {this.props.right}\n        </div>\n      </div>\n    )\n  }\n}\n\nHeader.defaultProps = {\n  clickLeft: () => null,\n  left: <i className=\"iconfont icon-i-left\"></i>,\n  right: null,\n  title: '标题'\n}\nexport default Header","import React, {Component} from 'react'\nimport {Link} from 'react-router-dom'\nimport './index.scss'\nimport ImgLazyLoad from '../../imgLazyLoad'\nclass GoodsList extends Component{\n  render () {\n    const { goodsList} = this.props\n    return (\n        <div className=\"goodsList\">\n          {goodsList.map((item) => {\n            return(\n              <Link to={`/goods/${item.id}`} key={item.id} className=\"goodsItem\">\n                <div className=\"goodsItemImg\">\n                  <ImgLazyLoad\n                    offSetTop={44}\n                    realUrl = {item.list_pic_url}>\n                  </ImgLazyLoad>\n                </div>\n                <div className=\"goodsItemName\">{item.name}</div>\n                <div className=\"goodsItemPrice\">￥{item.retail_price}元</div>\n              </Link>\n            )\n          })}\n        </div>\n    )\n  }\n}\nexport default GoodsList\n","import React, {Component, Fragment} from 'react'\nimport './index.scss'\nclass CommentList extends Component{\n  render () {\n    const { commentList} = this.props\n    return (\n      <Fragment>\n        <div className=\"commentList\">\n          {commentList.map((item, index) => {\n            return (\n              <div className=\"commentItem\" key={item.content + index}>\n                <div className=\"userInfo\">\n                  <div>{'user_info' in item && 'username' in item.user_info?item.user_info.username:'匿名用户'}</div>\n                  <div>{item.add_time}</div>\n                </div>\n                <div className=\"userComment\">{item.content}</div>\n                <div className=\"commentPicList\">\n                    {\n                        item.pic_list.map((item) => {\n                            return <img src={item.pic_url} key={item.id} alt={item.id}/>\n                        })\n                    }\n                </div>\n              </div>\n            )\n          })}\n        </div>\n      </Fragment>\n    )\n  }\n}\nexport default CommentList\n","import React, {Component} from 'react'\nimport {Link, withRouter} from 'react-router-dom'\nimport Header from '../../components/header'\nimport './index.scss'\nimport http from '../../http'\nimport ImgLazyLoad from '../../components/imgLazyLoad'\nimport { Carousel, Toast } from 'antd-mobile'\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as commonAction from '../../redux/actions/common';\nimport { Modal } from 'antd-mobile';\nimport CommentList from '../../components/common/commentList'\nimport GoodsList from '../../components/common/goodsList'\nclass Goods extends Component{\n  state = {\n    info: {\n      goodsName: '',\n      subTitle: '',\n      goods_desc: null\n    },\n    brand: {},\n    gallery: [],\n    comment: {},\n    attribute: [],\n    issue: [],\n    goodsList: [],\n    specificationList: [],\n    productList: [],\n    goodsCount: 0,\n    userHasCollect: 0,\n    goodsBuyNum: 0,\n    isShowSize: false\n  }\n  componentDidMount() {\n    this.fetchData(this.props.match.params.id)\n    this.fetchCartNum()\n  }\n  /*获取商品相关信息*/\n  async fetchData (id) {\n    const {actions} = this.props\n    try {\n      actions.startLoading()\n      const data = await http.getGoodsDetail({id})\n      const {goodsList} = await http.getGoodsRelated({id})\n      let {info, gallery, brand, comment, attribute,issue, specificationList, productList, userHasCollect} = data\n      specificationList.forEach((item) => {\n        item.activeId = item.valueList[0].id\n      })\n      this.setState({\n        info:{\n          goodsName: info.name,\n          subTitle: info.goods_brief,\n          goods_desc: info.goods_desc\n        },\n        userHasCollect,\n        comment,\n        brand,\n        gallery,\n        attribute,\n        issue,\n        goodsList,\n        specificationList,\n        productList\n      })\n      actions.endLoading()\n    }catch (e) {\n      actions.endLoading()\n      throw e\n    }\n  }\n  /*获取购物车商品数量*/\n  async fetchCartNum () {\n    try {\n      const {errno, errmsg, cartTotal} = await http.getCartNum({})\n      if(errno===401){\n          Toast.fail(errmsg, .5,() => {\n            this.props.actions.loginFailure()\n          })\n      }else{\n        this.setState({goodsCount:cartTotal.goodsCount})\n      }\n    } catch (e) {\n        throw e\n    }\n  }\n  /*添加到我喜欢*/\n  async changeLikes () {\n    const {data:{type}} = await http.postDoLikes({typeId: 0, valueId: this.props.match.params.id})\n    this.setState({userHasCollect: type==='add'?1:0})\n  }\n  /*修改购买数量*/\n  changeBuyNum (val ,stock) {\n    if(this.state.goodsBuyNum + val >= 0 && this.state.goodsBuyNum + val <= stock){\n      this.setState({\n        goodsBuyNum: this.state.goodsBuyNum + val\n      })\n    }\n  }\n  goBack () {\n    const {history:{go}} = this.props\n    go(-1)\n  }\n  /*是否显示规格属性*/\n  changeIsShowSize () {\n    this.setState({\n      isShowSize: !this.state.isShowSize\n    })\n  }\n  componentWillReceiveProps(newP){\n    if(this.props.match.params.id!==newP.match.params.id){\n        this.fetchData(newP.match.params.id)\n    }\n  }\n  /*选择某个规格属性*/\n  changeSizeActiveId (index, item) {\n    const {specificationList, productList ,goodsBuyNum} = this.state\n    if(specificationList[index].activeId!==item.id){\n      specificationList[index].activeId = item.id\n      const {stock} = this.computedGoodsSizePriceAndSizeName(specificationList, productList)\n      this.setState({\n        specificationList,\n        goodsBuyNum: goodsBuyNum>stock?stock:goodsBuyNum\n      })\n    }\n  }\n  /*添加到购物车*/\n  async addCart (priceId, goodsBuyNum, isShowSize){\n    if(!isShowSize){\n      this.setState({isShowSize: true})\n      return null\n    }\n    if(goodsBuyNum<1){\n      Toast.fail('请选择商品数量',1)\n      return null\n    }\n    const {errno, errmsg} = await http.postAddCart({goodsId: this.props.match.params.id, number: goodsBuyNum, productId:priceId})\n    if(errno === 0){\n        Toast.success('添加成功！',.5, () =>{\n            this.fetchCartNum()\n        })\n    }else{\n      Toast.fail(errmsg, .5,() => {\n        if(errno === 401){\n          this.props.actions.loginFailure()\n        }\n      })\n    }\n  }\n  /*支付订单*/\n  payGoods () {\n    Toast.loading('下单功能还未GET,耐心等待~', 1)\n  }\n  /**\n   *\n   * @param sizeList\n   * @param priceList\n   * @returns {{hasChooseSizeName: string, price: number, stock: number, priceId: *}}\n   */\n  computedGoodsSizePriceAndSizeName(sizeList, priceList){\n    let hasChooseSize = []\n    let sizePriceIndex = []\n    let price = 0\n    let stock = 0\n    let priceId = null\n    sizeList.forEach((item) => {\n      item.valueList.forEach((temp) => {\n        if(item.activeId === temp.id){\n          sizePriceIndex.push(temp.id)\n          hasChooseSize.push(temp.value)\n        }\n      })\n    })\n    priceList.forEach((item) => {\n      if(item.goods_specification_ids === sizePriceIndex.join('_')){\n        price = item.retail_price\n        stock = item.goods_number\n        priceId = item.id\n      }\n    })\n    return {\n      hasChooseSizeName: hasChooseSize.join('、'),\n      price,\n      stock,\n      priceId\n    }\n  }\n  render () {\n    const {info:{goodsName, subTitle, goods_desc},\n      brand ,gallery, isShowSize, comment, attribute, goodsCount, userHasCollect, goodsBuyNum,\n      issue, goodsList, specificationList, productList} = this.state\n    const {hasChooseSizeName, price, stock,priceId  } = this.computedGoodsSizePriceAndSizeName(specificationList, productList)\n    const {history:{push}, isloading} = this.props\n    return (\n        !isloading?(\n            <div className=\"goodsPage\">\n              <Modal\n                  popup\n                  visible={isShowSize}\n                  onClose={this.changeIsShowSize.bind(this)}\n                  animationType=\"slide-up\"\n              >\n                <div className=\"goodsSizeDo\">\n                  <div className=\"goodsSizeSetMsg\">\n                    {gallery.length? <img src={gallery[0].img_url} alt=\"goods\"/>:null}\n                    <div className=\"gooodsSizePriceAndSize\">\n                      <div>单价: <span>￥{price}</span></div>\n                      <div>库存: <span>{stock}件</span></div>\n                      <div>已选择:\n                        <br/>{hasChooseSizeName}</div>\n                    </div>\n                    <div className=\"closeModel\" onClick={this.changeIsShowSize.bind(this)}>\n                      <i className=\"iconfont icon-cc-close-square\"></i>\n                    </div>\n                  </div>\n                  <div className=\"goodsSizeWrap\">\n                    {\n                      specificationList.map((item, index) => ((\n                        <div className=\"goodsSizeItem\" key={item.specification_id}>\n                          <div className=\"goodsSizeItemName\">{item.name}</div>\n                          <div className=\"goodsSizeListWrap\">\n                            {\n                              item.valueList.map(temp => (\n                                  <div className={item.activeId === temp.id?'goodsSizeListItem active':'goodsSizeListItem'}\n                                       onClick={this.changeSizeActiveId.bind(this, index, temp, stock)} key={temp.id}>{temp.value}\n                                  </div>\n                              ))\n                            }\n                          </div>\n                        </div>\n                        )))\n                    }\n                    <div className=\"goodsSizeItem\">\n                      <div className=\"goodsSizeItemName\">数量</div>\n                      {\n                        stock>0?(\n                            <div className=\"goodsSizeListWrap\">\n                              <div className=\"goodsBuyCount\">\n                                <div className=\"onePx_border\" onClick={this.changeBuyNum.bind(this, -1, stock)}>-</div>\n                                <div className=\"onePx_border\">{goodsBuyNum}</div>\n                                <div className=\"onePx_border\" onClick={this.changeBuyNum.bind(this,1, stock)}>+</div>\n                              </div>\n                            </div>\n                        ):(\n                            <div className=\"goodsSizeListWrap\">已售馨!</div>\n                        )\n                      }\n                    </div>\n                  </div>\n                </div>\n                <div className=\"goodsDoWrap\">\n                  <div onClick={this.addCart.bind(this,priceId,goodsBuyNum, isShowSize)}>加入购物车</div>\n                  <div  onClick={this.payGoods.bind(this)}>立即下单</div>\n                </div>\n              </Modal>\n              <Header clickLeft={this.goBack.bind(this)} title={goodsName}></Header>\n              <Carousel autoplay infinite>\n                {gallery.map(item => (\n                    <div className=\"goodsBannerItem\" key={item.id}>\n                      <ImgLazyLoad\n                          offSetTop={0}\n                          realUrl = {item.img_url}>\n                      </ImgLazyLoad>\n                    </div>\n                ))}\n              </Carousel>\n              <ul className=\"serviceList\">\n                <li><span>★</span>30天无忧退货</li>\n                <li><span>★</span>48小时快速退款</li>\n                <li><span>★</span>满88元免邮费</li>\n              </ul>\n              <div className=\"goodsMsgWrap\">\n                <div className=\"goodsNameTitle\">{goodsName}</div>\n                <div className=\"goodsNameSubTitle\">{subTitle}</div>\n                <div className=\"goodsPriceTitle\">￥{price}</div>\n                {\n                  'name' in brand?(\n                      <div className=\"goodsBrandTitle\" onClick={() => {push(`/brandDetail/${brand.id}`)}}>\n                        <div>{brand.name}</div>\n                      </div>\n                  ): null\n                }\n              </div>\n              <div className=\"goodsSize\" onClick={this.changeIsShowSize.bind(this)}>\n                <div>{hasChooseSizeName}</div>\n                <div>x {goodsBuyNum}</div>\n                <div>\n                  选择规格<i className=\"iconfont icon-right\"></i>\n                </div>\n              </div>\n              {comment.count?<div className=\"goodsComment\">\n                    <div className=\"goodsCommentTitle\">\n                      <div>评论 ({comment.count})</div>\n                      <div>\n                        <Link to={`/comment/${this.props.match.params.id}?typeId=0`} >\n                          查看全部<i className=\"iconfont icon-right\"></i>\n                        </Link>\n                      </div>\n                    </div>\n                    {\n                      'data' in comment? <CommentList commentList ={[comment.data]}></CommentList>:null\n                    }\n                  </div> :null}\n              <div className=\"goodsAttribute\">\n                <div className=\"goodsAttributeLine\">\n                  商品参数\n                </div>\n                <div className=\"goodsAttributeList\">\n                  {\n                    attribute.map((item) => (\n                        <div className=\"goodsAttributeItem\" key={item.name}>\n                          <div className=\"attributeLabel\">{item.name}</div>\n                          <div className=\"attributeContent\">{item.value}</div>\n                        </div>\n                    ))\n                  }\n                </div>\n              </div>\n              <div  dangerouslySetInnerHTML={{__html:goods_desc}} className=\"topicDetailImg\"></div>\n              <div className=\"goodsAttribute\">\n                <div className=\"goodsAttributeLine\">\n                  常见问题\n                </div>\n                {\n                  issue.map((item) => (\n                      <div className=\"problemWrap\" key={item.id}>\n                        <div className=\"problemLabel\">\n                          <span>√</span>{item.question}\n                        </div>\n                        <div className=\"problemContent\">\n                          {item.answer}\n                        </div>\n                      </div>\n\n                  ))\n                }\n              </div>\n              <div className=\"goodsAttribute\">\n                <div className=\"goodsAttributeLine\">\n                  大家都在看\n                </div>\n              </div>\n              <div className=\"goodsList\">\n                <GoodsList goodsList={goodsList}></GoodsList>\n              </div>\n              <div className=\"goodsPageDo\">\n                <div className={userHasCollect===1?'isLike like': 'isLike'} onClick={this.changeLikes.bind(this)}>\n                  {userHasCollect===1?'★': '☆'}\n                </div>\n                <div className=\"cartNum\" onClick={() => {push(`/cart`)}}>\n                  <i className=\"iconfont icon-Add-Cart\">\n                    <span>{goodsCount}</span>\n                  </i>\n                </div>\n                <div className=\"addCart\" onClick={this.addCart.bind(this,priceId, goodsBuyNum, isShowSize)}>加入购物车</div>\n                <div className=\"payGoods\" onClick={this.payGoods.bind(this)}>立即购买</div>\n              </div>\n            </div>\n            ):null\n    )\n  }\n}\nconst mapStateToProps = (state, props) => ({...state.common})\nconst mapDispatchToProps = dispatch => ({actions: bindActionCreators(commonAction, dispatch)})\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Goods))\n"],"sourceRoot":""}