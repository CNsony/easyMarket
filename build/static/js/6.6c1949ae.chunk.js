(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{204:function(e,t,a){"use strict";var n=a(16),i=a(22),s=a(27),c=a(25),o=a(26),r=a(77),l=a(1),m=a.n(l),d=(a(207),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).state={isLoad:!1,isLoading:!1},a.handler=a.handler.bind(Object(r.a)(Object(r.a)(a))),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.handler(),window.addEventListener("scroll",this.handler)}},{key:"handler",value:function(){var e=this;if(this.state.isLoading)window.removeEventListener("scroll",this.handler);else{var t=this.props,a=t.offSetTop,n=t.realUrl,i=window.scrollY+document.documentElement.clientHeight-a;if(this.refs.imgLazyLoad.offsetTop<i){var s=new Image;s.src=n,this.setState({isLoading:!0}),new Promise(function(e,t){s.onload=function(){e(s)}}).then(function(t){e.setState({isLoad:!0})})}}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handler)}},{key:"render",value:function(){var e=this.state.isLoad,t=this.props,a=t.realUrl,n=t.initUrl,i=e?a:n;return m.a.createElement("img",{ref:"imgLazyLoad",className:e?"imgLazyload loadEnd":"imgLazyload loading",src:i,alt:"imgLazyLoad"})}}]),t}(l.Component));d.defaultProps={offSetTop:40,initUrl:"https://ss0.bdstatic.com/-0U0bnSm1A5BphGlnYG/tam-ogel/8bc5c8ca3da4043fc6c9dbfb32d5dc89_121_121.jpg"},t.a=d},205:function(e,t,a){"use strict";var n=a(16),i=a(22),s=a(27),c=a(25),o=a(26),r=a(1),l=a.n(r),m=(a(206),function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"clickLeft",value:function(){this.props.clickLeft()}},{key:"render",value:function(){return l.a.createElement("div",{className:"header"},l.a.createElement("div",{className:"left",onClick:this.clickLeft.bind(this)},this.props.left),l.a.createElement("div",{className:"title"},this.props.title),l.a.createElement("div",{className:"right"},this.props.right))}}]),t}(r.Component));m.defaultProps={clickLeft:function(){return null},left:l.a.createElement("i",{className:"iconfont icon-i-left"}),right:null,title:"\u6807\u9898"},t.a=m},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){"use strict";var n=a(16),i=a(22),s=a(27),c=a(25),o=a(26),r=a(1),l=a.n(r),m=a(210),d=(a(209),a(204)),u=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.goodsList;return l.a.createElement("div",{className:"goodsList"},e.map(function(e){return l.a.createElement(m.a,{to:"/goods/".concat(e.id),key:e.id,className:"goodsItem"},l.a.createElement("div",{className:"goodsItemImg"},l.a.createElement(d.a,{offSetTop:44,realUrl:e.list_pic_url})),l.a.createElement("div",{className:"goodsItemName"},e.name),l.a.createElement("div",{className:"goodsItemPrice"},"\uffe5",e.retail_price,"\u5143"))}))}}]),t}(r.Component);t.a=u},209:function(e,t,a){},212:function(e,t,a){"use strict";var n=a(16),i=a(22),s=a(27),c=a(25),o=a(26),r=a(1),l=a.n(r),m=(a(213),function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.commentList;return l.a.createElement(r.Fragment,null,l.a.createElement("div",{className:"commentList"},e.map(function(e,t){return l.a.createElement("div",{className:"commentItem",key:e.content+t},l.a.createElement("div",{className:"userInfo"},l.a.createElement("div",null,"user_info"in e&&"username"in e.user_info?e.user_info.username:"\u533f\u540d\u7528\u6237"),l.a.createElement("div",null,e.add_time)),l.a.createElement("div",{className:"userComment"},e.content),l.a.createElement("div",{className:"commentPicList"},e.pic_list.map(function(e){return l.a.createElement("img",{src:e.pic_url,key:e.id,alt:e.id})})))})))}}]),t}(r.Component));t.a=m},213:function(e,t,a){},250:function(e,t,a){},276:function(e,t,a){"use strict";a.r(t);var n=a(7),i=(a(224),a(228)),s=(a(221),a(222)),c=(a(112),a(78)),o=a(5),r=a.n(o),l=a(44),m=a(16),d=a(22),u=a(27),p=a(25),h=a(26),v=a(1),f=a.n(v),g=a(210),E=a(203),b=a(205),N=(a(250),a(8)),y=a(204),L=a(35),k=a(21),S=a(45),C=a(212),z=a(208),j=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).state={info:{goodsName:"",subTitle:"",goods_desc:null},brand:{},gallery:[],comment:{},attribute:[],issue:[],goodsList:[],specificationList:[],productList:[],goodsCount:0,userHasCollect:0,goodsBuyNum:0,isShowSize:!1},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchData(this.props.match.params.id),this.fetchCartNum()}},{key:"fetchData",value:function(){var e=Object(l.a)(r.a.mark(function e(t){var a,n,i,s,c,o,l,m,d,u,p,h,v;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.actions,e.prev=1,a.startLoading(),e.next=5,N.a.getGoodsDetail({id:t});case 5:return n=e.sent,e.next=8,N.a.getGoodsRelated({id:t});case 8:i=e.sent,s=i.goodsList,c=n.info,o=n.gallery,l=n.brand,m=n.comment,d=n.attribute,u=n.issue,p=n.specificationList,h=n.productList,v=n.userHasCollect,p.forEach(function(e){e.activeId=e.valueList[0].id}),this.setState({info:{goodsName:c.name,subTitle:c.goods_brief,goods_desc:c.goods_desc},userHasCollect:v,comment:m,brand:l,gallery:o,attribute:d,issue:u,goodsList:s,specificationList:p,productList:h}),a.endLoading(),e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(1),a.endLoading(),e.t0;case 20:case"end":return e.stop()}},e,this,[[1,16]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCartNum",value:function(){var e=Object(l.a)(r.a.mark(function e(){var t,a,n,i,s=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.getCartNum({});case 3:t=e.sent,a=t.errno,n=t.errmsg,i=t.cartTotal,401===a?c.a.fail(n,.5,function(){s.props.actions.loginFailure()}):this.setState({goodsCount:i.goodsCount}),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"changeLikes",value:function(){var e=Object(l.a)(r.a.mark(function e(){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.postDoLikes({typeId:0,valueId:this.props.match.params.id});case 2:t=e.sent,a=t.data.type,this.setState({userHasCollect:"add"===a?1:0});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"changeBuyNum",value:function(e,t){this.state.goodsBuyNum+e>=0&&this.state.goodsBuyNum+e<=t&&this.setState({goodsBuyNum:this.state.goodsBuyNum+e})}},{key:"goBack",value:function(){(0,this.props.history.go)(-1)}},{key:"changeIsShowSize",value:function(){this.setState({isShowSize:!this.state.isShowSize})}},{key:"componentWillReceiveProps",value:function(e){this.props.match.params.id!==e.match.params.id&&this.fetchData(e.match.params.id)}},{key:"changeSizeActiveId",value:function(e,t){var a=this.state,n=a.specificationList,i=a.productList,s=a.goodsBuyNum;if(n[e].activeId!==t.id){n[e].activeId=t.id;var c=this.computedGoodsSizePriceAndSizeName(n,i).stock;this.setState({specificationList:n,goodsBuyNum:s>c?c:s})}}},{key:"addCart",value:function(){var e=Object(l.a)(r.a.mark(function e(t,a,n){var i,s,o,l=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return this.setState({isShowSize:!0}),e.abrupt("return",null);case 3:if(!(a<1)){e.next=6;break}return c.a.fail("\u8bf7\u9009\u62e9\u5546\u54c1\u6570\u91cf",1),e.abrupt("return",null);case 6:return e.next=8,N.a.postAddCart({goodsId:this.props.match.params.id,number:a,productId:t});case 8:i=e.sent,s=i.errno,o=i.errmsg,0===s?c.a.success("\u6dfb\u52a0\u6210\u529f\uff01",.5,function(){l.fetchCartNum()}):c.a.fail(o,.5,function(){401===s&&l.props.actions.loginFailure()});case 12:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"payGoods",value:function(){c.a.loading("\u4e0b\u5355\u529f\u80fd\u8fd8\u672aGET,\u8010\u5fc3\u7b49\u5f85~",1)}},{key:"computedGoodsSizePriceAndSizeName",value:function(e,t){var a=[],n=[],i=0,s=0,c=null;return e.forEach(function(e){e.valueList.forEach(function(t){e.activeId===t.id&&(n.push(t.id),a.push(t.value))})}),t.forEach(function(e){e.goods_specification_ids===n.join("_")&&(i=e.retail_price,s=e.goods_number,c=e.id)}),{hasChooseSizeName:a.join("\u3001"),price:i,stock:s,priceId:c}}},{key:"render",value:function(){var e=this,t=this.state,a=t.info,n=a.goodsName,c=a.subTitle,o=a.goods_desc,r=t.brand,l=t.gallery,m=t.isShowSize,d=t.comment,u=t.attribute,p=t.goodsCount,h=t.userHasCollect,v=t.goodsBuyNum,E=t.issue,N=t.goodsList,L=t.specificationList,k=t.productList,S=this.computedGoodsSizePriceAndSizeName(L,k),j=S.hasChooseSizeName,w=S.price,I=S.stock,O=S.priceId,_=this.props,A=_.history.push;return _.isloading?null:f.a.createElement("div",{className:"goodsPage"},f.a.createElement(s.a,{popup:!0,visible:m,onClose:this.changeIsShowSize.bind(this),animationType:"slide-up"},f.a.createElement("div",{className:"goodsSizeDo"},f.a.createElement("div",{className:"goodsSizeSetMsg"},l.length?f.a.createElement("img",{src:l[0].img_url,alt:"goods"}):null,f.a.createElement("div",{className:"gooodsSizePriceAndSize"},f.a.createElement("div",null,"\u5355\u4ef7: ",f.a.createElement("span",null,"\uffe5",w)),f.a.createElement("div",null,"\u5e93\u5b58: ",f.a.createElement("span",null,I,"\u4ef6")),f.a.createElement("div",null,"\u5df2\u9009\u62e9:",f.a.createElement("br",null),j)),f.a.createElement("div",{className:"closeModel",onClick:this.changeIsShowSize.bind(this)},f.a.createElement("i",{className:"iconfont icon-cc-close-square"}))),f.a.createElement("div",{className:"goodsSizeWrap"},L.map(function(t,a){return f.a.createElement("div",{className:"goodsSizeItem",key:t.specification_id},f.a.createElement("div",{className:"goodsSizeItemName"},t.name),f.a.createElement("div",{className:"goodsSizeListWrap"},t.valueList.map(function(n){return f.a.createElement("div",{className:t.activeId===n.id?"goodsSizeListItem active":"goodsSizeListItem",onClick:e.changeSizeActiveId.bind(e,a,n,I),key:n.id},n.value)})))}),f.a.createElement("div",{className:"goodsSizeItem"},f.a.createElement("div",{className:"goodsSizeItemName"},"\u6570\u91cf"),I>0?f.a.createElement("div",{className:"goodsSizeListWrap"},f.a.createElement("div",{className:"goodsBuyCount"},f.a.createElement("div",{className:"onePx_border",onClick:this.changeBuyNum.bind(this,-1,I)},"-"),f.a.createElement("div",{className:"onePx_border"},v),f.a.createElement("div",{className:"onePx_border",onClick:this.changeBuyNum.bind(this,1,I)},"+"))):f.a.createElement("div",{className:"goodsSizeListWrap"},"\u5df2\u552e\u99a8!")))),f.a.createElement("div",{className:"goodsDoWrap"},f.a.createElement("div",{onClick:this.addCart.bind(this,O,v,m)},"\u52a0\u5165\u8d2d\u7269\u8f66"),f.a.createElement("div",{onClick:this.payGoods.bind(this)},"\u7acb\u5373\u4e0b\u5355"))),f.a.createElement(b.a,{clickLeft:this.goBack.bind(this),title:n}),f.a.createElement(i.a,{autoplay:!0,infinite:!0},l.map(function(e){return f.a.createElement("div",{className:"goodsBannerItem",key:e.id},f.a.createElement(y.a,{offSetTop:0,realUrl:e.img_url}))})),f.a.createElement("ul",{className:"serviceList"},f.a.createElement("li",null,f.a.createElement("span",null,"\u2605"),"30\u5929\u65e0\u5fe7\u9000\u8d27"),f.a.createElement("li",null,f.a.createElement("span",null,"\u2605"),"48\u5c0f\u65f6\u5feb\u901f\u9000\u6b3e"),f.a.createElement("li",null,f.a.createElement("span",null,"\u2605"),"\u6ee188\u5143\u514d\u90ae\u8d39")),f.a.createElement("div",{className:"goodsMsgWrap"},f.a.createElement("div",{className:"goodsNameTitle"},n),f.a.createElement("div",{className:"goodsNameSubTitle"},c),f.a.createElement("div",{className:"goodsPriceTitle"},"\uffe5",w),"name"in r?f.a.createElement("div",{className:"goodsBrandTitle",onClick:function(){A("/brandDetail/".concat(r.id))}},f.a.createElement("div",null,r.name)):null),f.a.createElement("div",{className:"goodsSize",onClick:this.changeIsShowSize.bind(this)},f.a.createElement("div",null,j),f.a.createElement("div",null,"x ",v),f.a.createElement("div",null,"\u9009\u62e9\u89c4\u683c",f.a.createElement("i",{className:"iconfont icon-right"}))),d.count?f.a.createElement("div",{className:"goodsComment"},f.a.createElement("div",{className:"goodsCommentTitle"},f.a.createElement("div",null,"\u8bc4\u8bba (",d.count,")"),f.a.createElement("div",null,f.a.createElement(g.a,{to:"/comment/".concat(this.props.match.params.id,"?typeId=0")},"\u67e5\u770b\u5168\u90e8",f.a.createElement("i",{className:"iconfont icon-right"})))),"data"in d?f.a.createElement(C.a,{commentList:[d.data]}):null):null,f.a.createElement("div",{className:"goodsAttribute"},f.a.createElement("div",{className:"goodsAttributeLine"},"\u5546\u54c1\u53c2\u6570"),f.a.createElement("div",{className:"goodsAttributeList"},u.map(function(e){return f.a.createElement("div",{className:"goodsAttributeItem",key:e.name},f.a.createElement("div",{className:"attributeLabel"},e.name),f.a.createElement("div",{className:"attributeContent"},e.value))}))),f.a.createElement("div",{dangerouslySetInnerHTML:{__html:o},className:"topicDetailImg"}),f.a.createElement("div",{className:"goodsAttribute"},f.a.createElement("div",{className:"goodsAttributeLine"},"\u5e38\u89c1\u95ee\u9898"),E.map(function(e){return f.a.createElement("div",{className:"problemWrap",key:e.id},f.a.createElement("div",{className:"problemLabel"},f.a.createElement("span",null,"\u221a"),e.question),f.a.createElement("div",{className:"problemContent"},e.answer))})),f.a.createElement("div",{className:"goodsAttribute"},f.a.createElement("div",{className:"goodsAttributeLine"},"\u5927\u5bb6\u90fd\u5728\u770b")),f.a.createElement("div",{className:"goodsList"},f.a.createElement(z.a,{goodsList:N})),f.a.createElement("div",{className:"goodsPageDo"},f.a.createElement("div",{className:1===h?"isLike like":"isLike",onClick:this.changeLikes.bind(this)},1===h?"\u2605":"\u2606"),f.a.createElement("div",{className:"cartNum",onClick:function(){A("/cart")}},f.a.createElement("i",{className:"iconfont icon-Add-Cart"},f.a.createElement("span",null,p))),f.a.createElement("div",{className:"addCart",onClick:this.addCart.bind(this,O,v,m)},"\u52a0\u5165\u8d2d\u7269\u8f66"),f.a.createElement("div",{className:"payGoods",onClick:this.payGoods.bind(this)},"\u7acb\u5373\u8d2d\u4e70")))}}]),t}(v.Component);t.default=Object(E.a)(Object(L.b)(function(e,t){return Object(n.a)({},e.common)},function(e){return{actions:Object(k.b)(S,e)}})(j))}}]);
//# sourceMappingURL=6.6c1949ae.chunk.js.map